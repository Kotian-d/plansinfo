<!DOCTYPE html>
<html>
  <head>
    <title>DTH Plans - Multi Period Amounts</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Bootstrap CDN for styling -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body>
    <%- include('partials/navbar') %>

    <section class="container" style="margin-top: 40px">
      <% if (successMsg && successMsg.length >
    0) { %>
    <div class="alert alert-success alert-dismissible" role="alert">
      <button
        type="button"
        class="close"
        data-dismiss="alert"
        aria-label="Close"
      >
        <span aria-hidden="true">&times;</span>
      </button>
      <%= successMsg %>
    </div>
    <% } %> <% if (errorMsg && errorMsg.length > 0) { %>
    <div class="alert alert-danger alert-dismissible" role="alert">
      <button
        type="button"
        class="close"
        data-dismiss="alert"
        aria-label="Close"
      >
        <span aria-hidden="true">&times;</span>
      </button>
      <%= errorMsg %>
    </div>
    <% } %>
    
      <h2 class="text-center">Prepaid Plans</h2>

      <form method="POST" action="/prepaidplans/edit/<%= id %>">
        <div class="form-group">
          <label for="title">Title</label>
          <input
            type="text"
            id="title"
            name="title"
            value="<%= editdata.title %>"
            class="form-control"
            required
          />
        </div>

        <div class="form-group">
          <label for="description">Description</label>
          <textarea
            id="description"
            name="description"
            class="form-control"
            rows="3"
            required
          >
<%= editdata.description %></textarea
          >
        </div>

        <div class="form-group">
          <label for="validity">Validity</label>
          <input
            type="text"
            id="validity"
            name="validity"
            value="<%= editdata.validity %>"
            class="form-control"
            placeholder="e.g., 1 Month"
            required
          />
        </div>

        <div class="form-group">
          <label>Select Operator</label>
          <select
            class="form-control"
            name="operator"
            value=""
            required
          >
            <option value="" disabled selected>Select Operator</option>
            <% if (operators && operators.length) { %> <%
            operators.forEach(function(op) { %>
            <option value="<%= op._id %>"><%= op.name %></option>
            <% }) %> <% } %>
          </select>
        </div>

        <div class="form-group">
          <label for="amount">Amount</label>
          <input
            type="number"
            step="0.01"
            id="amount"
            name="amount"
            value="<%= editdata.amount %>"
            class="form-control"
            required
          />
        </div>

        <div class="form-group">
          <label for="tags">Tags</label>
          <select
            id="tags"
            name="tags"
            class="form-control select2-multi"
            multiple="multiple"
            
            required
          >
            <% if (tagsList && tagsList.length) { tagsList.forEach(function(tag)
            { %>
            <option value="<%= tag._id %>"><%= tag.name %></option>
            <% }) } %>
          </select>
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
    </section>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <script>
      $(document).ready(function () {
        $(".select2-multi").select2({
          placeholder: "Choose or add tags",
          tags: true,
          tokenSeparators: [",", " "],
        });
      });
    </script>
  </body>
</html>
