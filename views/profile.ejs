<!DOCTYPE html>
<html>
  <head>
    <title>Profile Page</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    />
    <style>
      .profile-container {
        max-width: 600px;
        margin: 40px auto;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        padding: 20px;
        background: #fff;
      }
      .apikey {
        word-break: break-all;
        background-color: #f7f7f7;
        padding: 10px;
        border-radius: 4px;
        font-family: monospace;
        user-select: all;
      }
    </style>
  </head>
  <body>
    <%- include('partials/navbar') %>

    <div class="container profile-container">
      <% if (successMsg && successMsg.length > 0) { %>
      <div class="alert alert-success alert-dismissible" role="alert">
        <button
          type="button"
          class="close"
          data-dismiss="alert"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
        <%= successMsg %>
      </div>
      <% } %> <% if (errorMsg && errorMsg.length > 0) { %>
      <div class="alert alert-danger alert-dismissible" role="alert">
        <button
          type="button"
          class="close"
          data-dismiss="alert"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
        <%= errorMsg %>
      </div>
      <% } %>

      <h2 class="text-center">User Profile</h2>

      <div class="text-center" style="margin-bottom: 20px">
        <img
          src="https://media.istockphoto.com/id/1300845620/vector/user-icon-flat-isolated-on-white-background-user-symbol-vector-illustration.jpg?s=612x612&w=0&k=20&c=yBeyba0hUkh14_jgv1OKqIH0CCSWU_4ckRkAoy2p73o="
          alt="User Avatar"
          class="img-circle"
          style="width: 120px; height: 120px"
        />
      </div>

      <dl class="dl-horizontal">
        <dt>Username:</dt>
        <dd><%= user.username %></dd>

        <dt>Mobile:</dt>
        <dd><%= user.mobile %></dd>

        <dt>API Key:</dt>
        <dd><div class="apikey"><%= user.apikey %></div></dd>
      </dl>

      <hr />

      <h3>Change Password</h3>
      <form
        action="/profile/change-password"
        method="POST"
        class="form-horizontal"
        id="passwordChangeForm"
      >
        <div class="form-group">
          <label class="control-label col-sm-4" for="currentPassword"
            >Current Password:</label
          >
          <div class="col-sm-8">
            <input
              type="password"
              class="form-control"
              id="currentPassword"
              name="currentPassword"
              required
            />
          </div>
        </div>
        <div class="form-group">
          <label class="control-label col-sm-4" for="newPassword"
            >New Password:</label
          >
          <div class="col-sm-8">
            <input
              type="password"
              class="form-control"
              id="newPassword"
              name="newPassword"
              required
              minlength="6"
            />
          </div>
        </div>
        <div class="form-group">
          <label class="control-label col-sm-4" for="confirmPassword"
            >Confirm New Password:</label
          >
          <div class="col-sm-8">
            <input
              type="password"
              class="form-control"
              id="confirmPassword"
              name="confirmPassword"
              required
              minlength="6"
            />
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-offset-4 col-sm-8">
            <button type="submit" class="btn btn-primary">
              Change Password
            </button>
          </div>
        </div>
      </form>
    </div>

<%- include('partials/footer') %>